language: c

before_install:
  - sudo apt-get -qq update
  - sudo apt-get install luajit
  - sudo apt-get install verilator
  - sudo ln -s /usr/bin/luajit-2.0.0-beta9 /usr/bin/luajit
  - pwd
  - wget https://github.com/zdevito/terra/releases/download/release-2016-02-26/terra-Linux-x86_64-2fa8d0a.zip
  - unzip terra-Linux-x86_64-2fa8d0a.zip
  - ls
  - sudo ln -s /home/travis/build/jameshegarty/rigel/terra-Linux-x86_64-2fa8d0a/bin/terra /usr/bin/terra
  - ls -la /usr/bin
  - ls -la ./terra-Linux-x86_64-2fa8d0a/bin
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
  - sudo apt-get -y update
  - sudo apt-get -y install libstdc++6-4.7-dev
  - terra examples/pointwise_wide_handshake.lua
  - cd examples
  - make out/pointwise_wide_handshake.terra.correct.txt
  - make out/pointwise_wide_handshake.verilator.correct.txt

script:
  - cd examples
  - make verilog terra